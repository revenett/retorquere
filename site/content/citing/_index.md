---
title: Citation Keys
weight: 3
aliases:
  - /Citation-Keys
  - /citation-keys
tags:
  - citation keys
---

## Generating citekeys for your references

The BibTeX citations keys generated by the standard Zotero exporters are fully auto-generated, using an algorithm that usually generates unique keys. For serious LaTeX
users, "usually" presents the following problems:

* If a non-unique key is generated, which one gets postfixed with a distinguishing character is essentially
  non-deterministic.
* The keys are *always* auto-generated, so if you correct a typo in the author name or title, the key will change
* You can't see the citation keys until you export them

For a LaTeX author, the citation keys have their own meaning, fully separate from the other reference data, even if
people usually pick a naming scheme related to them. As the citation key is *the* piece of data that connects your
bibliography, this is a piece of data you want to have control over. BBT offers you this control:

* Set your own, fixed citation keys
* Stable citation keys, without key clashes. BBT generates citation keys that take into
  account other existing keys in your library
  in a deterministic way, regardless of what part of your library you export, or the order in which you do it.
* Generate citation keys from JabRef patterns

You can also

* Drag and drop LaTeX citations to your favorite LaTeX editor
* Show both pinned (fixed) citation keys and dynamically generated ones in the reference list view
* Search for citation keys (if you select "All fields and tags" in the search box)

## Set your own, fixed citation keys

You can fix the citation key for a reference by adding the text `Citation Key: [your citekey]` anywhere in the
"extra" field of the reference on a line of its own, or tge legacy `biblatexcitekey[my_key]`. You can generate a fixed citation key by
selecting references, right-clicking, and selecting "Generate BibTeX key".

## Drag and drop/hotkey citations

You can drag and drop citations into your LaTeX/Markdown/Orgmode editor, and it will add a proper `\cite{citekey}`/`[@citekey]`/`[[zotero://select...][@citekey]`. The `cite` command is
configurable for LaTeX by setting the config option in the [preferences]({{< ref "installation/preferences" >}}). Do not include the leading backslash. This feature requires a one-time setup: go to Zotero preferences, tab Export, under Default Output Format, select "Better BibTeX Quick Copy", and choose the Quick Copy format under the `Citation keys` preferences for BBT.

## Find duplicate keys through integration with [Report Customizer](https://github.com/retorquere/zotero-report-customizer)

The plugin will generate BibTeX comments to show whether a key conflicts and with which entry. BBT integrates with
[Zotero: Report Customizer](https://github.com/retorquere/zotero-report-customizer) to display the BibTeX key plus any
conflicts between them in the zotero report.

## Configurable citekey generator

BBT also implements a new citekey generator for those entries that don't have one set explicitly; the formatter pattern language mostly follows
the [JabRef key formatting syntax](https://help.jabref.org/en/BibtexKeyPatterns) in the Better BibTeX
preferences (you can get there via the Zotero preferences, or by clicking the Better BibTeX "Preferences" button in the addons pane.

The default key pattern is `{{% preference "citekeyFormat" %}}`; if you have papers that use keys which were generated by the key generator of the standard Bib(La)TeX exporters of Zotero you may want to use `[zotero:clean]` instead in order to ease migration from existing exports for people who previously used the standard Zotero Bib(La)TeX exports. You will be offered this choice on first run of BBT.

A common pattern is `[auth:lower][year]`, which means

1. last name of first author without spaces, in lowercase
2. year of publication if any,
3. a letter postfix (a, b, c, etc) in case of a clash (this part is always added, you can't disable it, although you can change it to Zotero-style numeric)

**note that changing the pattern used to cause all your non-fixed keys to be regenerated in Zotero 4.** In Zotero 5, this is no longer the case; changing a pattern will only affect references being created/changed after you changed the pattern. If you want your keys to update after a pattern change you will have to select your references, right-click, and select `Refresh`. This will not affect keys you have pinned.

If you want to get fancy, you can set multiple patterns separated by a vertical bar, of which the first will be applied
that yields a non-empty string. If all return a empty string, a random key will be generated.

### Generating citekeys

The full list of functions (extract data from your reference into your citekey) and filters (change the extracted data) is:

#### Functions

{{< citekey-formatters/functions >}}

**Note**: the functions above all have the `clean` filter (see below) automatically applied to them. If you want more control, `auth`, `authIni`, `edtr`, ... and all the author-related fields that mimic the JabRef equivalents also have capitalized versions (so `Auth`, `AuthIni`, `Edtr`, ...) which follow the same algorithm but do not have any cleaning (diacritic folding, space removal, stripping of invalid citekey characters) applied. These can be used to pass through the filters specified below much like the fields from the table above. See also "usage note" below. For all the non-author fields, you can use the reference fields directly. The possible fields are:

{{< citekey-formatters/fields >}}

(fields marked `**` are only available in Juris-M).

#### Flags

- `+initials` adds initials to any author name function. Specify using e.g. `[auth+initials]`

#### Filters

{{< citekey-formatters/filters >}}

*Usage note*: the functions `condense`, `skipwords`, `capitalize` and `select` rely on whitespaces for word handling. The JabRef functions strip
whitespace and thereby make these filter functions sort of useless. You will in general want to use the fields from the
table above, which give you the values from Zotero without any changes. The fields with `**` are only available in Juris-M.

