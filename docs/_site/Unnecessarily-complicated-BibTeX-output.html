<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <title>zotero-better-bibtex</title>
  <meta name="description" content="IMake Zotero effective for us LaTeX holdouts">

<!-- TODO: Create customizable favicon -->
  <!-- favicon -->
  <!-- <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#3B3535">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="theme-color" content="#BB2316"> -->

  <!-- MDL styles -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-red.min.css" />

  <!-- Theme Styles -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <!-- Prism Styles -->
  <link rel="stylesheet" href="assets/css/prism.css">

  <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
  </style>
</head>

<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <!-- Variable pages to sort pages for navigation -->


<header class="mdl-layout__header mdl-layout__header--waterfall">
  <!-- Top row, always visible -->
  <div class="mdl-layout__header-row eng-navigation-row">
    <!-- Title -->
    <span class="mdl-layout-title"><a class="eng-title-a" href="/">zotero-better-bibtex</a></span>
    <div class="mdl-layout-spacer"></div>
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
  mdl-textfield--floating-label mdl-textfield--align-right">
      <label class="mdl-button mdl-js-button mdl-button--icon" for="waterfall-exp">
  <i class="material-icons">search</i>
  </label>
      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" name="sample" id="waterfall-exp">
      </div>
    </div>
  </div>
  <!-- Bottom row, not visible on scroll -->
  <div class="mdl-layout__header-row eng-navigation-row">
    <div class="mdl-layout-spacer"></div>
    <!-- Navigation -->
    <nav class="mdl-navigation">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </nav>
  </div>
</header>
<div class="mdl-layout__drawer eng-navigation-row">
  <span class="mdl-layout-title"><a class="eng-title-a" href="/">zotero-better-bibtex</a></span>
  <nav class="mdl-navigation">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </nav>
</div>

    <script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-64261422-5', 'auto');
ga('send', 'pageview');

</script>


    <main class="mdl-layout__content">
      <a name="top"></a>
      <div class="mdl-grid eng-wrapper">

   

  <div class="mdl-card__supporting-text">
    <p>Zotero does all its work in UTF-8 Unicode, which is absolutely the right thing to do. Unfortunately, for those shackled
to BibTeX and who cannot (yet) move to BibLaTeX, unicode is a major PITA. Also, Zotero supports some simple HTML markup
in your references that Bib(La)TeX won’t understand.</p>

<p>BBT will convert from/to HTML/LaTeX; Currently supports &lt;i&gt;⇔\emph &amp; \textit, &lt;b&gt;⇔\textbf,
&lt;sub&gt;⇔_{…}, &lt;sup&gt;⇔^{…} and &lt;sc&gt;⇔\textsc{…}; more can be added on request.
BBT contains a comprehensive list of LaTeX constructs, so stuff like <code class="highlighter-rouge">\"{o}</code> or <code class="highlighter-rouge">\"o</code> will be converted to their unicode
equivalents on import, and their unicode equivalents back to <code class="highlighter-rouge">\"{o}</code> if you have that option enabled (but you don’t
have to if you use BibLaTeX, which has fairly good Unicode support).</p>

<h2 id="gotchas">Gotchas</h2>

<ul>
  <li>In titles of English references, you can control capitalization by surrounding parts of the text in <code class="highlighter-rouge">&lt;span
class="nocase"&gt;...&lt;/span&gt;</code>. Text between these will not have their capitalization changed in any way. See more on this
below in the section <code class="highlighter-rouge">Mapping fields</code>.</li>
  <li>In names, you can force first names like <code class="highlighter-rouge">Philippe</code> to be exported to <code class="highlighter-rouge">{\relax Ph}ilippe</code> (which causes it to get
initial <code class="highlighter-rouge">Ph.</code> rather than <code class="highlighter-rouge">P.</code> in styles that do initials) by adding a <a href="http://www.fileformat.info/info/unicode/char/0097/index.htm">end of guarded area</a> character between <code class="highlighter-rouge">Ph</code> and <code class="highlighter-rouge">ilippe</code>.</li>
</ul>

<h2 id="hidden-features">Hidden features</h2>

<ul>
  <li><strong><code class="highlighter-rouge">csquotes</code> support</strong>; if you <a href="Configuration#hidden-preferences">open <code class="highlighter-rouge">about:config</code></a> and set
<code class="highlighter-rouge">extensions.zotero.translators.better-bibtex.csquotes</code> to a string of character pairs, each pair will be assumed to be
the open and close parts of a pair and will be replaced with a <code class="highlighter-rouge">\\enquote{...}</code> construct.</li>
</ul>

<h2 id="mapping-fields">Mapping Fields</h2>

<p>There isn’t a straightforward one-to-one mapping for all Zotero to Bib(La)TeX fields. For most I can make reasonable
choices, but there are some things where Better BibTeX takes a little more liberties with your references in order to
get sensible output.</p>

<p>Title fields in particular are a total mess. Zotero <a href="https://zotero-manual.github.io/zotero-manual/adding-items#sentence-and-title-case">recommends having your titles in sentence
case</a> because that’s what the
embedded citation processor expects, but of course, BibLaTeX expects your titles to be in Title Case… <em>but only if
they’re in English</em>. Nice. In order to translate the Zotero recommendation into Bib(La)TeX best practice, BBT will
title-case the titles of English references. English references, as far as BBT is concerned, are those references that
have their language explicitly set to an English language (<code class="highlighter-rouge">american</code> counts as English for example), and those
references that have no explicit language set. To do this, BBT uses the same title-caser that Zotero uses to produce
title-cased styles such as Chicago.</p>

<p>The titles so modified will then pass through your Bib(La)TeX processor, which will in turn try to lowercase or
initial-caps some words and not others – for English references. But then sometimes, you want words that have capitals
to keep. BBT assumes that if a word has at least one capital letter (subject to some rather complex exceptions)
you meant it to be there, and you want BibTeX to leave it alone no matter what. To do that, it
wraps those (strings of) words in those double braces. This is to let BibTeX know that <code class="highlighter-rouge">ISDN</code> may not be changed to
<code class="highlighter-rouge">isdn</code> or <code class="highlighter-rouge">Isdn</code>, regardless of the bibliography style in play.</p>

<p>The simplest approach would be to wrap title fields in extra braces as a whole, and some sites will erroneously
recommend doing so (looking at you here MIT librarians). But there are styles do need to recapitalize parts of the
title (for example to selectively downcase the titlecasing), and having the whole field so wrapped interferes with that. So Better BibTeX wraps individual words – or strings
of those words – that have capitals in them with double braces.</p>

<p>For English titles BBT will Title Case and brace-protect your titles on output. Except, those Title Cased words which BBT changed itself will <em>not</em> be wrapped in double-braces,
as it <em>is</em> OK for the styles to change casing for those, depending on the style at play. So <code class="highlighter-rouge">I like ISDN heaps better
than dialup</code> would output to <code class="highlighter-rouge">I Like  Heaps Better than Dialup</code>. Apparently non-English titles are supposed to
be in sentence case, so BBT doesn’t touch those.</p>

<p>You can steer this process somewhat by enclosing the parts you don’t want case manipulation on in <code class="highlighter-rouge">&lt;span
class="nocase"&gt;...&lt;/span&gt;</code>. Anything between those won’t be touched by Zotero or BBT. This is formally supported by
Zotero and will work in the Word/LibreOffice plugins as well as in the BibTeX export. This will be required for words
you wish to always keep lowercase, for example.  Also, if
you don’t generally use Zotero for generating bibliographies but just for BibTeX reference management, you can turn on the hidden
preference
<a href="https://github.com/retorquere/zotero-better-bibtex/wiki/Configuration#extensionszoterotranslatorsbetter-bibtexsuppresstitlecase">extensions.zotero.translators.better-bibtex.suppressTitleCase</a>
to keep BBT from applying title-casing, but take note that if you do this, the
bibliographies you get from Zotero and the bibliograhies you get through Bib(La)TeX will differ, and you can’t complain
about this. Brace protection cannot be turned off.</p>

<h2 id="why-the-double-braces">Why the double braces?</h2>

<p>But why then the double-braces (``) rather than the commonly recommended single braces (<code class="highlighter-rouge">{...}</code>)?</p>

<p>This is not because of some arcane aesthetic preference, but because the Bib(La)TeX case protection rules are incredibly
convoluted (<a href="https://github.com/retorquere/zotero-better-bibtex/issues/541">#541</a>,
<a href="https://github.com/retorquere/zotero-better-bibtex/issues/383">#383</a>). For example, here are some “interesting” cases
that BBT has learned to deal with. Did you know that</p>

<ul>
  <li><code class="highlighter-rouge">{\emph{Homo sapiens}}</code> <em>un</em>-case-protects <code class="highlighter-rouge">Homo sapiens</code>? It sure was a surprise to me.  So
<code class="highlighter-rouge">\emph{Homo sapiens}</code> is case-protected (will not be recapitalized by Bib(La)TeX), but <code class="highlighter-rouge">{\emph{Homo sapiens}}</code> <em>is not</em> case-protected so it <em>will</em> be recapitalized. So to get
predictable behavior, this is written out as <code class="highlighter-rouge">}</code>.</li>
  <li>casing behavior over the <em>whole</em> reference field depends on <a href="https://github.com/retorquere/zotero-better-bibtex/issues/541#issuecomment-240156274">whether there’s a slash-command at the first position</a> of the title?</li>
  <li><a href="https://github.com/retorquere/zotero-better-bibtex/issues/541#issuecomment-240999396">apparently</a>, to make sure that <code class="highlighter-rouge">Reading HLA Hart's: &lt;i&gt;The Concept of Law&lt;/i&gt;</code> renders as expected means I have to output the astoundingly ugly <code class="highlighter-rouge">{Reading 's: }}{\emph{ of }}}}}</code>?</li>
</ul>

<p>The double-bracing is the only unambiguous rule I could construct that consistently gets the rendered reference right (so far).</p>

<p>Bib(La)TeX provides a never-ending stream of edge cases, which BBT tries to decide algorithmically. I try to keep the resulting file as pretty as I can (I’m sensitive to the aesthetics myself), but the target is best described as “given reasonable input, generate well-rendering output”, and reasonable-to-well-rendering in the BBT case will have to include “follows Zotero recommendations for storing references” and “prefer intent-preserving LaTeX over pretty-looking LaTeX”.</p>

<p>Bib(La)TeX be crazy.</p>

<h2 id="you-are-a-hardcore-latex-user">You are a hardcore LaTeX user</h2>

<p>If you’d really just rather hand-code your LaTeX constructs, BBT makes that possible:</p>

<ul>
  <li>You can add literal LaTeX anywhere in your reference by surrounding it with <code class="highlighter-rouge">&lt;pre&gt;....&lt;/pre&gt;</code> tags. BBT will
convert to/from unicode and (un)escape where required but will pass whatever is enclosed in the pre tags unchanged.</li>
  <li>An entry tagged with <code class="highlighter-rouge">#LaTeX</code> (case-sensitive!) will have all fields exported as if they’re wrapped in
<code class="highlighter-rouge">&lt;pre&gt;...&lt;/pre&gt;</code>, so you can include LaTeX markup in your references. <!-- If you enable "Raw BibTeX import" in the preferences, BibTeX imports will not be
escaped on import, and will automatically be tagged for raw export. --></li>
</ul>

  </div>
</div>

    </main>

    <footer class="mdl-mini-footer">
  <div class="mdl-mini-footer__left-section">
    <div class="mdl-logo">zotero-better-bibtex</div>
    <ul class="mdl-mini-footer__link-list">
      <li><a href="#">Help</a></li>
      <li><a href="#">Privacy & Terms</a></li>
    </ul>
  </div>
  <div class="mdl-mini-footer--right-section">
    <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#top" title="back to top" role="button">
      <i class="material-icons md-48" role="presentation">arrow_upward</i>
    </a>
  </div>
</footer>

  </div>
  <!-- Prismjs -->
  <script type="text/javascript" src=/assets/js/prism.min.js>

  </script>
  <!-- MDL Lite js -->
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <!-- Google Analytics -->
  
</body>
</html>
