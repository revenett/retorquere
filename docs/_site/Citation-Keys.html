<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <title>zotero-better-bibtex</title>
  <meta name="description" content="IMake Zotero effective for us LaTeX holdouts">

<!-- TODO: Create customizable favicon -->
  <!-- favicon -->
  <!-- <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#3B3535">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="theme-color" content="#BB2316"> -->

  <!-- MDL styles -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-red.min.css" />

  <!-- Theme Styles -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <!-- Prism Styles -->
  <link rel="stylesheet" href="assets/css/prism.css">

  <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
  </style>
</head>

<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <!-- Variable pages to sort pages for navigation -->


<header class="mdl-layout__header mdl-layout__header--waterfall">
  <!-- Top row, always visible -->
  <div class="mdl-layout__header-row eng-navigation-row">
    <!-- Title -->
    <span class="mdl-layout-title"><a class="eng-title-a" href="/">zotero-better-bibtex</a></span>
    <div class="mdl-layout-spacer"></div>
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
  mdl-textfield--floating-label mdl-textfield--align-right">
      <label class="mdl-button mdl-js-button mdl-button--icon" for="waterfall-exp">
  <i class="material-icons">search</i>
  </label>
      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" name="sample" id="waterfall-exp">
      </div>
    </div>
  </div>
  <!-- Bottom row, not visible on scroll -->
  <div class="mdl-layout__header-row eng-navigation-row">
    <div class="mdl-layout-spacer"></div>
    <!-- Navigation -->
    <nav class="mdl-navigation">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </nav>
  </div>
</header>
<div class="mdl-layout__drawer eng-navigation-row">
  <span class="mdl-layout-title"><a class="eng-title-a" href="/">zotero-better-bibtex</a></span>
  <nav class="mdl-navigation">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </nav>
</div>

    <script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-64261422-5', 'auto');
ga('send', 'pageview');

</script>


    <main class="mdl-layout__content">
      <a name="top"></a>
      <div class="mdl-grid eng-wrapper">

   

  <div class="mdl-card__supporting-text">
    <p>Standard Zotero BibTeX citations keys are fully auto-generated, using an algorithm that usually generates unique keys. For serious LaTeX
users, “usually” presents the following problems:</p>

<ul>
  <li>If a non-unique key is generated, which one gets postfixed with a distinguishing character is essentially
non-deterministic.</li>
  <li>The keys are <em>always</em> auto-generated, so if you correct a typo in the author name or title, the key will change</li>
  <li>You can’t see the citation keys until you export them</li>
</ul>

<p>For a LaTeX author, the citation keys have their own meaning, fully separate from the other reference data, even if
people usually pick a naming scheme related to them. As the citation key is <em>the</em> piece of data that connects your
bibliography, this is a piece of data you want to have control over. BBT offers you this control:</p>

<ul>
  <li>Set your own, fixed citation keys</li>
  <li>Stable citation keys, without key clashes. BBT generates citation keys that take into
account other existing keys in your library
in a deterministic way, regardless of what part of your library you export, or the order in which you do it.</li>
  <li>Generate citation keys from JabRef patterns</li>
</ul>

<p>You can also</p>

<ul>
  <li>Drag and drop LaTeX citations to your favorite LaTeX editor</li>
  <li>Show both pinned (fixed) citation keys and dynamically generated ones in the reference list view</li>
  <li>Search for citation keys (if you select “All fields and tags” in the search box)</li>
</ul>

<h2 id="set-your-own-fixed-citation-keys">Set your own, fixed citation keys</h2>

<p>You can fix the citation key for a reference by adding the text “bibtex: [your citekey]” (sans quotes) anywhere in the
“extra” field of the reference, or by using biblatexcitekey[my_key]. You can generate a fixed citation key by
selecting references, right-clicking, and selecting “Generate BibTeX key”.</p>

<h2 id="drag-and-drophotkey-citations">Drag and drop/hotkey citations</h2>

<p>You can drag and drop citations into your LaTeX/Markdown/Orgmode editor, and it will add a proper <code class="highlighter-rouge">\cite{citekey}</code>/<code class="highlighter-rouge">[@citekey]</code>/<code class="highlighter-rouge">[[zotero://select...][@citekey]</code>. The <code class="highlighter-rouge">cite</code> command is
configurable for LaTeX by setting the config option in the [[Preferences|Configuration]]. Do not include the leading backslash. This feature requires a one-time setup: go to Zotero preferences, tab Export, under Default Output Format, select “Better BibTeX Quick Copy”, and choose the Quick Copy format under the <code class="highlighter-rouge">Citation keys</code> preferences for BBT.</p>

<h2 id="find-duplicate-keys-through-integration-with-report-customizer">Find duplicate keys through integration with <a href="https://github.com/retorquere/zotero-report-customizer">Report Customizer</a></h2>

<p>The plugin will generate BibTeX comments to show whether a key conflicts and with which entry. BBT integrates with
<a href="https://github.com/retorquere/zotero-report-customizer">Zotero: Report Customizer</a> to display the BibTeX key plus any
conflicts between them in the zotero report.</p>

<h2 id="configurable-citekey-generator">Configurable citekey generator</h2>

<p>BBT also implements a new citekey generator for those entries that don’t have one set explicitly; the formatter follows
the <a href="http://jabref.sourceforge.net/help/LabelPatterns.php">JabRef key formatting syntax</a> in the Better BibTeX
preferences (you can get there via the Zotero preferences, or by clicking the Better BibTeX “Preferences” button in the addons pane.</p>

<p>The default key pattern is <code class="highlighter-rouge">[zotero]</code>, which implements the key generator of the standard Bib(La)TeX exporters in
order to ease migration from existing exports for people who previously used the standard Zotero Bib(La)TeX exports. <strong>I would strongly recommend setting a different pattern</strong>, because Zotero’s key generator has a number of problems, including readily generating citation keys not supported by LaTeX’s bibliography processors. Using the <code class="highlighter-rouge">[zotero]</code> pattern inherits all the problems of the standard Zotero citekey generation except one; where Zotero will, by default, generate duplicate keys if you export overlapping parts of your library, BBT will not. That said, <strong>don’t use the <code class="highlighter-rouge">[zotero]</code> pattern</strong> unless you already have a lot of papers that rely on those keys.</p>

<p>A common pattern is <code class="highlighter-rouge">[auth:lower][year]</code>, which means</p>

<ol>
  <li>last name of first author without spaces, in lowercase</li>
  <li>year of publication if any,</li>
  <li>a letter postfix in case of a clash (this part is always added, you can’t disable it)</li>
</ol>

<p><strong>note that changing the pattern will cause all your non-fixed keys to be regenerated</strong></p>

<p>If you want to get fancy, you can set multiple patterns separated by a vertical bar, of which the first will be applied
that yields a non-empty string. If all return a empty string, a random key will be generated. Note that in addition to
the ‘special’ fields listed JabRef also allows all ‘native’ fields as key values; the plugin does the same but allows
for <em>Zotero</em> native fields (case sensitive!) not Bib(La)TeX native fields. The possible fields are:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AbstractNote</td>
      <td>AccessDate</td>
      <td>ApplicationNumber</td>
      <td>Archive</td>
    </tr>
    <tr>
      <td>ArchiveLocation</td>
      <td>ArtworkMedium</td>
      <td>ArtworkSize</td>
      <td>Assignee</td>
    </tr>
    <tr>
      <td>Attachments</td>
      <td>AudioFileType</td>
      <td>AudioRecordingFormat</td>
      <td>BillNumber</td>
    </tr>
    <tr>
      <td>BlogTitle</td>
      <td>BookTitle</td>
      <td>CallNumber</td>
      <td>CaseName</td>
    </tr>
    <tr>
      <td>Code</td>
      <td>CodeNumber</td>
      <td>CodePages</td>
      <td>CodeVolume</td>
    </tr>
    <tr>
      <td>Committee</td>
      <td>Company</td>
      <td>ConferenceName</td>
      <td>Country</td>
    </tr>
    <tr>
      <td>Court</td>
      <td>Date</td>
      <td>DateAdded</td>
      <td>DateDecided</td>
    </tr>
    <tr>
      <td>DateEnacted</td>
      <td>DateModified</td>
      <td>DictionaryTitle</td>
      <td>Distributor</td>
    </tr>
    <tr>
      <td>DocketNumber</td>
      <td>DocumentNumber</td>
      <td>DOI</td>
      <td>Edition</td>
    </tr>
    <tr>
      <td>EncyclopediaTitle</td>
      <td>EpisodeNumber</td>
      <td>Extra</td>
      <td>FilingDate</td>
    </tr>
    <tr>
      <td>FirstPage</td>
      <td>ForumTitle</td>
      <td>Genre</td>
      <td>History</td>
    </tr>
    <tr>
      <td>Institution</td>
      <td>InterviewMedium</td>
      <td>ISBN</td>
      <td>ISSN</td>
    </tr>
    <tr>
      <td>Issue</td>
      <td>IssueDate</td>
      <td>IssuingAuthority</td>
      <td>ItemType</td>
    </tr>
    <tr>
      <td>JournalAbbreviation</td>
      <td>Label</td>
      <td>Language</td>
      <td>LegalStatus</td>
    </tr>
    <tr>
      <td>LegislativeBody</td>
      <td>LetterType</td>
      <td>LibraryCatalog</td>
      <td>ManuscriptType</td>
    </tr>
    <tr>
      <td>MapType</td>
      <td>Medium</td>
      <td>MeetingName</td>
      <td>Month</td>
    </tr>
    <tr>
      <td>NameOfAct</td>
      <td>Network</td>
      <td>Notes</td>
      <td>Number</td>
    </tr>
    <tr>
      <td>NumberOfVolumes</td>
      <td>NumPages</td>
      <td>Pages</td>
      <td>PatentNumber</td>
    </tr>
    <tr>
      <td>Place</td>
      <td>PostType</td>
      <td>PresentationType</td>
      <td>PriorityNumbers</td>
    </tr>
    <tr>
      <td>ProceedingsTitle</td>
      <td>ProgrammingLanguage</td>
      <td>ProgramTitle</td>
      <td>PublicationTitle</td>
    </tr>
    <tr>
      <td>PublicLawNumber</td>
      <td>Publisher</td>
      <td>References</td>
      <td>Related</td>
    </tr>
    <tr>
      <td>Reporter</td>
      <td>ReporterVolume</td>
      <td>ReportNumber</td>
      <td>ReportType</td>
    </tr>
    <tr>
      <td>Rights</td>
      <td>RunningTime</td>
      <td>Scale</td>
      <td>Section</td>
    </tr>
    <tr>
      <td>Series</td>
      <td>SeriesNumber</td>
      <td>SeriesText</td>
      <td>SeriesTitle</td>
    </tr>
    <tr>
      <td>Session</td>
      <td>ShortTitle</td>
      <td>Source</td>
      <td>Studio</td>
    </tr>
    <tr>
      <td>Subject</td>
      <td>System</td>
      <td>Tags</td>
      <td>ThesisType</td>
    </tr>
    <tr>
      <td>Title</td>
      <td>University</td>
      <td>Url</td>
      <td>Version</td>
    </tr>
    <tr>
      <td>VideoRecordingFormat</td>
      <td>Volume</td>
      <td>WebsiteTitle</td>
      <td>WebsiteType</td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-usage">Advanced usage</h3>

<p>BBT adds a few fields, flags and filter functions that JabRef (perhaps wisely) doesn’t. These are:</p>

<h4 id="functions">Functions</h4>

<ul>
  <li><code class="highlighter-rouge">auth</code>, <code class="highlighter-rouge">authIni</code>, <code class="highlighter-rouge">edtr</code>, … and all the author-related fields that mimic the JabRef equivalents also have
capitalized versions (so <code class="highlighter-rouge">Auth</code>, <code class="highlighter-rouge">AuthIni</code>, <code class="highlighter-rouge">Edtr</code>, …) which follow the same algorithm but do not have any cleaning
(diacritic folding, space removal, stripping of invalid citekey characters) applied. These can be used to pass through
the filters specified below much like the fields from the table above. See also “usage note” below.</li>
  <li><code class="highlighter-rouge">journal</code>: returns the journal abbreviation, or, if not found, the journal title, If ‘automatic journal abbreviation’ is enabled in the BBT settings, it will use the same abbreviation filter Zotero
uses in the wordprocessor integration. You might want to use the <code class="highlighter-rouge">abbr</code> filter (see below) on this.</li>
  <li><code class="highlighter-rouge">library</code>: returns the name of the shared group library, or nothing if the reference is in your personal library</li>
  <li><code class="highlighter-rouge">0</code>: a pseudo-function that sets the citekey disambiguation postfix to numeric (-1, -2, etc, like the standard Zotero
Bib(La)TeX translators do) rather than alphabetic (a, b, c). Does not add any text to the citekey otherwise.</li>
  <li><code class="highlighter-rouge">&gt;X</code>: a pseudo-function which aborts the current pattern generation if what came before it is X characters or less (<code class="highlighter-rouge">[&gt;0]</code> is a typical use. You’d typically use this with something like <code class="highlighter-rouge">[auth][&gt;0][year]|[title][year]</code> which means if there’s no author you get <code class="highlighter-rouge">title-year</code> rather than just <code class="highlighter-rouge">year</code>.</li>
</ul>

<h4 id="flags">Flags</h4>

<ul>
  <li><code class="highlighter-rouge">+initials</code> adds initials to any author name function. Specify using e.g. [auth+initials]</li>
</ul>

<h4 id="filters">Filters</h4>

<ul>
  <li><code class="highlighter-rouge">nopunct</code>: removes punctuation</li>
  <li><code class="highlighter-rouge">condense</code>: this replaces spaces in the value passed in. You can specify what to replace it with by adding it as a
parameter, e.g <code class="highlighter-rouge">condense,_</code> will replace spaces with underscores. <strong>Parameters should not contain spaces</strong> unless you
want the spaces in the value passed in to be replaced with those spaces in the parameter</li>
  <li><code class="highlighter-rouge">skipwords</code>: filters out common words like ‘of’, ‘the’, … the list of words can be seen and changed by going into
<code class="highlighter-rouge">about:config</code> under the key <code class="highlighter-rouge">extensions.zotero.translators.better-bibtex.skipWords</code> as a comma-separated,
case-insensitive list of words.
If you want to strip words like ‘Jr.’ from names, you could use something like <code class="highlighter-rouge">[Auth:nopunct:skipwords:fold]</code> after adding <code class="highlighter-rouge">jr</code> to the skipWords list.
Note that this filter is always applied if you use <code class="highlighter-rouge">title</code> (which is different from <code class="highlighter-rouge">Title</code>) or <code class="highlighter-rouge">shorttitle</code>.</li>
  <li><code class="highlighter-rouge">select</code>: selects words from the value passed in. The format is <code class="highlighter-rouge">select,start,number</code> (1-based), so <code class="highlighter-rouge">select,1,4</code>
would select the first four words. If <code class="highlighter-rouge">number</code> is not given, all words from <code class="highlighter-rouge">start</code> to the end of the list are selected. It is important to note that `select’ works only on values that have the words separated by whitespace, so the caveat below applies.</li>
  <li><code class="highlighter-rouge">ascii</code>: removes all non-ascii characters</li>
  <li><code class="highlighter-rouge">fold</code>: tries to replace diacritics with ascii look-alikes. Removes non-ascii characters it cannot match</li>
  <li><code class="highlighter-rouge">alphanum</code>: clears out everything but unicode alphanumeric characters (unicode character classes <code class="highlighter-rouge">L</code> and <code class="highlighter-rouge">N</code>)</li>
  <li><code class="highlighter-rouge">capitalize</code>: uppercases the first letter of each word</li>
  <li><code class="highlighter-rouge">postfix</code>: postfixes with its parameter, so <code class="highlighter-rouge">postfix,_</code> will add an underscore to the end if, and only if, the value
it is supposed to postfix isn’t empty</li>
  <li><code class="highlighter-rouge">prefix</code>: prefixes with its parameter, so <code class="highlighter-rouge">prefix,_</code> will add an underscore to the front if, and only if, the value
it is supposed to prefix isn’t empty. If you want to use a reserved character (such as <code class="highlighter-rouge">:</code> or <code class="highlighter-rouge">\</code>), you’ll need to add a
backslash (<code class="highlighter-rouge">\</code>) in front of it.</li>
</ul>

<p><em>Usage note</em>: the functions <code class="highlighter-rouge">condense</code>, <code class="highlighter-rouge">skipwords</code>, <code class="highlighter-rouge">capitalize</code> and <code class="highlighter-rouge">select</code> rely on whitespaces for word handling. The JabRef functions strip
whitespace and thereby make these filter functions sort of useless. You will in general want to use the fields from the
table above, which give you the values from Zotero without any changes.</p>

<h2 id="generation-of-stable-keys-and-syncing">Generation of stable keys, and syncing</h2>

<p>Better BibTeX versions after 0.6.8 generate stable citation keys across your entire library. These stable keys come in
two flavors:</p>

<ol>
  <li>‘soft’ keys, which auto-update whenever the relevant data from the reference does, and</li>
  <li>‘pinned’ or ‘fixed’ keys, which don’t.</li>
</ol>

<p>The pinned keys show up in the ‘extra’ field of your references, and sync across libraries. The citation key is shown in
the details pane of the reference, and in the <code class="highlighter-rouge">extra</code> column of the references list if you have enabled it in the BBT
preferences. In the details pane, soft keys are displayed in italics; in the references list, soft keys have an asterisk
after the key. The soft keys <strong>do not sync</strong>, but they’re present in a separate
database so partial exports will know to generate keys not already in use (even if that is a ‘soft’ use), and so these
soft keys will reliably survive restarts of Zotero.</p>

<p>Quite a bit of trickery is involved in generating these stable keys, and some of this trickery could cause an undue burden
on the Zotero sync infrastructure. To prevent such strain on the Zotero sync servers, the following restrictions are in
place:</p>

<ul>
  <li>By default, BBT only generates soft keys. You can generate a pinned key by right-clicking the reference and choosing
‘Generate BibTeX key’. You can clear this key either by editing the extra field, or right-clicking the reference and
selecting ‘clear BibTeX key’. Clearing will immediately generate a fresh soft key.</li>
  <li>If you want to make sure all your exported BibTeX files have pinned keys (very useful if you have a shared library, or
you work from multiple workstations), go into the BBT preferences and select ‘on export’. This option will be greyed out
unless you have Zotero sync off, or, if enabled, have set it to auto-sync. Each pinned key change (or clearing of a
pinned key) means a change to the reference, and that means the item will be synced if you have that set up. Massive
amounts of key changes (which can easily happen if you have on-export and you export your full library) could
overwhelm the Zotero sync service if presented in sudden bulk; automatic syncing ameliorates that problem. I’m working
on a change so you can make this a per-library setting, and a change that syncs citekeys outside the Zotero servers.</li>
  <li>If you always want pinned keys, go into the BBT preferences and select ‘on change’. Mind that creation of a new
reference counts as a change, and thus any new reference created (e.g. through import by any means) will immediately
get a fixed key set which will <em>not</em> respond to subsequent edits of the reference.</li>
</ul>

<p>I am terribly sorry having to do this, but not doing this would risk sync being permanently impossible, as the Zotero
server will kick you out if a sync takes too long.</p>

  </div>
</div>

    </main>

    <footer class="mdl-mini-footer">
  <div class="mdl-mini-footer__left-section">
    <div class="mdl-logo">zotero-better-bibtex</div>
    <ul class="mdl-mini-footer__link-list">
      <li><a href="#">Help</a></li>
      <li><a href="#">Privacy & Terms</a></li>
    </ul>
  </div>
  <div class="mdl-mini-footer--right-section">
    <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#top" title="back to top" role="button">
      <i class="material-icons md-48" role="presentation">arrow_upward</i>
    </a>
  </div>
</footer>

  </div>
  <!-- Prismjs -->
  <script type="text/javascript" src=/assets/js/prism.min.js>

  </script>
  <!-- MDL Lite js -->
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <!-- Google Analytics -->
  
</body>
</html>
